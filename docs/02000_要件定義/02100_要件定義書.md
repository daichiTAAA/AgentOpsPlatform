# 要件定義書: ソロプレナー／AIネイティブ企業基盤システム

---

## 文書情報

- 文書名: ソロプレナー／AIネイティブ企業基盤システム（要件定義書）
- 版数: 0.10（ドラフト改訂）
- 作成日: 2025-09-07
- 更新日: 2025-09-07
- 作成者: システム開発チーム
- 参照資料: docs/01000_企画/01100_企画書.md（2025-09-07 v1.1）

---

## 1. 要約（Executive Summary）

本システムは、Redmine（中枢管理）、Databricks（知識・分析）、VS Code（共創作業）を統合し、AIエージェントを部門横断の「実務担当」として活用する運営基盤を提供する。人間はビジョン・承認・倫理判断を担い、AIが実務を遂行する人機協調モデルを標準化する。

---

## 2. 背景・目的・ゴール

- 背景（企画書§1）: 人間中心運営からAIエージェント活用型への転換ニーズが高まっている。
- 目的（企画書§1, §2）: 個人/少人数でも数十人規模の生産性を実現し、透明性・ガバナンス・教育資産化を両立する。
- 成果目標（企画書§4, §5）:
  - 少人数での大規模業務遂行（スケーラビリティ）
  - レビュー/インシデント対応の工数削減（ROI: 1年以内回収の想定/要再見積）
  - すべてのAI行動の監査可能性（完全履歴管理）

---

## 3. スコープ

- 対象範囲（Must）
  - Redmine, Databricks, VS Code の統合基盤
  - AIエージェントの業務実行、HITL（Human-in-the-Loop）承認、完全履歴化
  - タスク/チケット、ナレッジ検索・分析、共創作業、監査・ガバナンス
- 対象外（Out of Scope / 将来検討）
  - 自社LLMの学習・ファインチューニング環境の構築
  - 物理的なRPA/デバイス制御領域
  - ERP/会計などの広範囲業務パッケージの導入（連携は本要件に含む）

---

## 4. 利用者・権限

- 役割
  - 経営者/プロダクトオーナー（承認者）
  - 作業者（人間）
  - AIエージェント（仮想作業者）
  - システム管理者
- 権限レベル（例）
  - Admin: 全設定・監査ログ・権限管理
  - Approver: 重要操作の承認/却下、監査閲覧
  - Contributor: タスク実行/ドキュメント更新
  - Agent: 許可範囲内の自動実行（必須承認の手前まで）

---

## 5. ユースケース（要約）

- UC-01: 経営者がビジョン/目標をRedmineに登録 → AIがWBS/タスク分解 → 承認後に実行
- UC-02: 市場調査依頼 → AIがDatabricksから既存資産を検索/分析し、ドラフトをVS Codeに作成 → 承認後に配布
- UC-03: バグ/課題受付 → AIが再現/原因推定/修正案を作成 → 人間がレビュー承認 → 自動PR/ドキュメント反映
- UC-04: すべてのAI行動ログをRedmineに集約し、後追い監査/教育資産化

---

## 6. 機能要件（FR）

### 6.1 中枢管理（Redmine）

- [FR-001] タスク/チケット管理を提供する（テンプレート、親子/関連、カスタムフィールド、SLAを含む）。
- [FR-002] ワークフロー/承認を構成可能とし、差戻しとチェックリストをサポートする。
- [FR-003] 変更履歴を完全保存し、操作主体（人/AI）を明示する監査ログを提供する。
- [FR-004] VS Code/Databricks/エージェント実行イベントと双方向に連携するWebhook/APIを提供する。

### 6.2 AIエージェント管理・実行

- [FR-005] 部門/職能単位のエージェント役割（プロファイル/権限）を定義できる。
- [FR-006] プロンプトテンプレート、RAG参照、ツール実行、ガードレールから成る実行基盤を提供する。
- [FR-007] 重要操作は事前/事後のHITL承認を必須化でき、リスク閾値で分岐できる。
- [FR-008] 入出力・ファイル変更・意思決定過程をイベントとして記録する。

### 6.3 知識・分析（Databricks）

- [FR-009] 既存ドキュメント/コード/ノートブックをメタデータ化し索引化する。
- [FR-010] セマンティック検索/類似提示/簡易分析ジョブを実行できる。
- [FR-011] データのアクセス制御、バージョニング、ライフサイクル管理を提供する。

### 6.4 共創作業（VS Code）

- [FR-012] ドキュメント/コードのドラフト作成、差分表示、変更提案（PR）を行える。
- [FR-013] タスク連携、関連資料の自動添付、テンプレート適用により作業文脈を共有できる。
- [FR-014] リント/テスト/文書チェックを自動実行し、結果をRedmineへ連携する。

### 6.5 ガバナンス/監査

- [FR-015] 操作主体、根拠資料、承認者、時刻、成果物リンクを自動ひも付けして可視化する。
- [FR-016] 承認必須範囲、機密区分、外部共有可否、モデル使用制限のポリシーを設定できる。
- [FR-017] 期間/案件別の監査証跡をPDF/CSVでエクスポートできる。

### 6.6 外部連携/拡張

- [FR-018] REST API/Webhook/イベント連携を提供する（イベントバスは将来検討）。
- [FR-019] Git/CI、メール/チャット通知、ドライブとの連携を行える。

### 6.7 データ（機能）

- [FR-020] すべての成果物にタスクID/主体/時刻/出典のメタデータを自動付与する。

---

## 7. 非機能要件（NFR／暫定・要合意）

### 7.1 信頼性/可用性

- [NFR-001] 月間可用性は99.5%以上とする（社内利用想定）。
- [NFR-002] DR目標はRTO≤4h、RPO≤1hとする。

### 7.2 性能

- [NFR-003] 一般操作のp95応答≤1.5sとする。
- [NFR-004] 検索処理のp95応答≤3sとする。
- [NFR-005] 監査レポート作成≤5分/1万イベントとする。

### 7.3 セキュリティ/認証・認可

- [NFR-006] RBAC/ABACにより最小権限を実装する。
- [NFR-007] SSO/OIDCによる認証連携を提供する。
- [NFR-008] 監査ログの改ざん防止機構を備える。

### 7.4 スケーラビリティ

- [NFR-009] ユーザー数50→500、エージェント10→100への段階拡張に耐える。

### 7.5 可観測性

- [NFR-010] 追跡ID、集中ログ/メトリクス/トレース、しきい値アラートを提供する。

### 7.6 保守性

- [NFR-011] 構成管理（IaC化想定）、ドキュメント整備、バージョン互換ポリシーを維持する。

### 7.7 互換性

- [NFR-012] Redmine/Databricks/VS Codeの各LTS互換を維持する。

### 7.8 コンプライアンス/データ管理

- [NFR-013] データ分類（機密/内部/公開）を定義し強制する。
- [NFR-014] 監査ログの保全期間を1〜3年で運用設計し、アーカイブ/削除ポリシーを定義する。
- [NFR-015] PII/秘密情報のマスキング/匿名化と持ち出し制御を実施する。